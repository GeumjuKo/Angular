{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../auth/auth.service\";\nimport * as i5 from \"@angular/common\";\n\nfunction WritingComponent_option_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 33);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ct_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", ct_r4.category);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ct_r4.category);\n  }\n}\n\nfunction WritingComponent_div_26_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"File is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction WritingComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, WritingComponent_div_26_span_1_Template, 2, 0, \"span\", 19);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.f[\"file\"].errors[\"required\"]);\n  }\n}\n\nfunction WritingComponent_span_28_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 36);\n  }\n\n  if (rf & 2) {\n    const imageSrc_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", imageSrc_r6, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction WritingComponent_span_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 34);\n    i0.ɵɵtemplate(1, WritingComponent_span_28_img_1_Template, 1, 1, \"img\", 35);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const imageSrc_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", imageSrc_r6);\n  }\n}\n\nexport let WritingComponent = /*#__PURE__*/(() => {\n  class WritingComponent {\n    constructor(router, http, fb, authService) {\n      this.router = router;\n      this.http = http;\n      this.fb = fb;\n      this.authService = authService;\n      this.categories = [{\n        id: 1,\n        category: \"Liver\"\n      }, {\n        id: 2,\n        category: \"Heart\"\n      }, {\n        id: 3,\n        category: \"Stomach\"\n      }];\n      this.name = '';\n      this.prof_img = '';\n      this.role = '';\n      this.id = '';\n      this.dicom_id = '';\n      this.gender = '';\n      this.age = 0;\n      this.imageSrcList = [];\n      this.authService.currentUser().getUserData((err, data) => {\n        if (err) console.log(\"유저정보를 불러오는데 실패했습니다.\", err);\n        this.name = data.UserAttributes[3].Value;\n        this.id = this.authService.currentUser().getUsername();\n      });\n      this.role = \"Doctor\";\n      this.prof_img = \"../assets/images/profile.png\";\n      this.dicom_id = \"kkj.dicom98\", this.gender = \"female\", this.age = 0;\n      this.WritingForm = this.fb.group({\n        title: new FormControl(''),\n        diagnosis: new FormControl(''),\n        category: new FormControl(''),\n        description: new FormControl(''),\n        views: 0,\n        user: this.fb.group({\n          name: this.name,\n          id: this.id,\n          dicom_id: this.dicom_id,\n          gender: this.gender,\n          age: this.age,\n          role: this.role,\n          prof_img: this.prof_img\n        }),\n        file: new FormControl([], [Validators.required]),\n        file_source: new FormControl([], [Validators.required]),\n        comments: new FormControl({}),\n        isComment: new FormControl(false)\n      });\n    }\n\n    get f() {\n      return this.WritingForm.controls;\n    }\n\n    ngOnInit() {}\n\n    readURL(event) {\n      if (event.target.files && event.target.files.length) {\n        const fileList = event.target.files;\n\n        for (const file of fileList) {\n          this.readImage(file);\n        }\n      }\n    }\n\n    readImage(file) {\n      if (file.type && !file.type.startsWith('image/')) {\n        console.log('File is not an image.', file.type, file);\n        return;\n      }\n\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        this.imageSrcList.push(reader.result);\n        this.WritingForm.patchValue({\n          file_source: this.imageSrcList\n        });\n      };\n\n      reader.addEventListener('progress', event => {\n        if (event.loaded && event.total) {\n          const percent = event.loaded / event.total * 100;\n          console.log(`Progress: ${Math.round(percent)}`);\n        }\n      });\n      reader.readAsDataURL(file);\n    }\n\n    submit() {\n      console.log('writingform', this.WritingForm.value);\n      this.http.post('https://ssokuycqjh.execute-api.ap-northeast-2.amazonaws.com/post', this.WritingForm.value).subscribe(res => {\n        console.log(res);\n        this.router.navigate([\"dashboard\"]);\n      });\n    }\n\n  }\n\n  WritingComponent.ɵfac = function WritingComponent_Factory(t) {\n    return new (t || WritingComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.AuthService));\n  };\n\n  WritingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: WritingComponent,\n    selectors: [[\"app-writing\"]],\n    decls: 46,\n    vars: 10,\n    consts: [[1, \"menu_bar\"], [\"onclick\", \"history.back()\", 1, \"back_btn\"], [1, \"fi\", \"fi-br-angle-double-small-left\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"contents_wrap\"], [1, \"main\"], [1, \"user_info\"], [1, \"sec1\"], [1, \"profile_img\", 3, \"src\"], [1, \"sec2\"], [1, \"user_name\"], [1, \"user_role\"], [1, \"category\"], [\"formControlName\", \"category\", \"id\", \"category\", \"name\", \"category\", 3, \"ngModel\", \"ngModelChange\"], [\"hidden\", \"\", 3, \"selected\", \"ngValue\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [1, \"title\"], [\"id\", \"title\", \"formControlName\", \"title\", \"type\", \"text\", \"name\", \"title\", \"placeholder\", \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\", \"maxlength\", \"20\", \"required\", \"\"], [1, \"image\"], [4, \"ngIf\"], [1, \"image_privew\"], [\"class\", \"iiii\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"file\", \"formControlName\", \"file\", \"multiple\", \"\", \"accept\", \".jpg, .png, .jpeg, .jfif\", 1, \"fileInput\", 2, \"display\", \"none\", 3, \"change\"], [\"fileInput\", \"\"], [\"type\", \"button\", \"id\", \"image_plus_button\", 3, \"click\"], [1, \"diagnosis\"], [\"id\", \"diagnosis\", \"formControlName\", \"diagnosis\", \"type\", \"text\", \"name\", \"diagnosis\", \"placeholder\", \"\\uC9C4\\uB2E8\\uBA85\", \"maxlength\", \"20\", \"required\", \"\"], [1, \"contents\"], [2, \"color\", \"#00f7ff\", \"font-weight\", \"bold\", \"font-size\", \"20px\"], [\"formControlName\", \"description\", \"placeholder\", \"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\"], [1, \"post_button\"], [\"id\", \"post_button\"], [1, \"fi\", \"fi-rs-pencil\"], [3, \"ngValue\"], [1, \"iiii\"], [3, \"src\", 4, \"ngIf\"], [3, \"src\"]],\n    template: function WritingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r9 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"button\", 1);\n        i0.ɵɵelementStart(2, \"i\", 2);\n        i0.ɵɵtext(3, \" Back\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"form\", 3);\n        i0.ɵɵlistener(\"ngSubmit\", function WritingComponent_Template_form_ngSubmit_4_listener() {\n          return ctx.submit();\n        });\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"div\", 5);\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵelement(9, \"img\", 8);\n        i0.ɵɵelementStart(10, \"div\", 9);\n        i0.ɵɵelementStart(11, \"span\", 10);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"span\", 11);\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"hr\");\n        i0.ɵɵelementStart(16, \"div\", 12);\n        i0.ɵɵelementStart(17, \"select\", 13);\n        i0.ɵɵlistener(\"ngModelChange\", function WritingComponent_Template_select_ngModelChange_17_listener($event) {\n          return ctx.selectedCategory = $event;\n        });\n        i0.ɵɵelementStart(18, \"option\", 14);\n        i0.ɵɵtext(19, \"CATEGORY\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(20, WritingComponent_option_20_Template, 2, 2, \"option\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"hr\");\n        i0.ɵɵelementStart(22, \"div\", 16);\n        i0.ɵɵelement(23, \"input\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(24, \"hr\");\n        i0.ɵɵelementStart(25, \"div\", 18);\n        i0.ɵɵtemplate(26, WritingComponent_div_26_Template, 2, 1, \"div\", 19);\n        i0.ɵɵelementStart(27, \"div\", 20);\n        i0.ɵɵtemplate(28, WritingComponent_span_28_Template, 2, 1, \"span\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"input\", 22, 23);\n        i0.ɵɵlistener(\"change\", function WritingComponent_Template_input_change_29_listener($event) {\n          return ctx.readURL($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"button\", 24);\n        i0.ɵɵlistener(\"click\", function WritingComponent_Template_button_click_31_listener() {\n          i0.ɵɵrestoreView(_r9);\n\n          const _r3 = i0.ɵɵreference(30);\n\n          return _r3.click();\n        });\n        i0.ɵɵtext(32, \" + \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(33, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(34, \"hr\");\n        i0.ɵɵelementStart(35, \"div\", 25);\n        i0.ɵɵelement(36, \"input\", 26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(37, \"hr\");\n        i0.ɵɵelementStart(38, \"div\", 27);\n        i0.ɵɵelementStart(39, \"i\", 28);\n        i0.ɵɵtext(40, \"feed text\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(41, \"textarea\", 29);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"div\", 30);\n        i0.ɵɵelementStart(43, \"button\", 31);\n        i0.ɵɵelementStart(44, \"i\", 32);\n        i0.ɵɵtext(45, \" Post\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.WritingForm);\n        i0.ɵɵadvance(5);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.prof_img, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.role);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedCategory);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"selected\", true)(\"ngValue\", undefined);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.f[\"file\"].touched && ctx.f[\"file\"].invalid);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.imageSrcList);\n      }\n    },\n    directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.FormControlName, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i5.NgForOf, i3.DefaultValueAccessor, i3.MaxLengthValidator, i3.RequiredValidator, i5.NgIf],\n    styles: [\"@import\\\"https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css\\\";@import\\\"https://cdn-uicons.flaticon.com/uicons-regular-straight/css/uicons-regular-straight.css\\\";@import\\\"https://cdn-uicons.flaticon.com/uicons-bold-rounded/css/uicons-bold-rounded.css\\\";@font-face{font-family:KOTRA_GOTHIC;src:url(https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-10-21@1.0/KOTRA_GOTHIC.woff) format(\\\"woff\\\");font-weight:400;font-style:normal}@font-face{font-family:paybooc-Bold;src:url(https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-07@1.0/paybooc-Bold.woff) format(\\\"woff\\\");font-weight:400;font-style:normal}@font-face{font-family:paybooc-ExtraBold;src:url(https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-07@1.0/paybooc-ExtraBold.woff) format(\\\"woff\\\");font-weight:400;font-style:normal}.menu_bar[_ngcontent-%COMP%]{height:50px;display:flex;align-items:center}.back_btn[_ngcontent-%COMP%]{background:none;border-style:none;color:#00f7ff;font-weight:700;font-size:18px}.contents_wrap[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:10%;align-items:center}.main[_ngcontent-%COMP%]{width:40%;padding:15px 20px;display:block;border-radius:20px;background-color:#fff3;justify-content:center;align-items:center}.user_info[_ngcontent-%COMP%]{margin:10px;display:flex}.sec1[_ngcontent-%COMP%]{margin-right:auto;width:250px;height:60px;display:flex;align-items:center}.sec2[_ngcontent-%COMP%]{margin-left:10px;display:flex;flex-direction:column;justify-content:center}.user_name[_ngcontent-%COMP%]{font-size:22px;font-weight:700;font-family:paybooc-ExtraBold;color:#00f7ff}.user_role[_ngcontent-%COMP%]{font-size:15px;color:#fff}.profile_img[_ngcontent-%COMP%]{width:60px;border-radius:100px;border:5px solid transparent;background-origin:border-box;background-clip:content-box,border-box;background-image:linear-gradient(rgb(255,255,255),rgb(255,255,255)),linear-gradient(to right,#fbfcb9be,#ffcdf3aa,#65d3ffaa)}.title[_ngcontent-%COMP%], .diagnosis[_ngcontent-%COMP%], .image[_ngcontent-%COMP%], .contents[_ngcontent-%COMP%], .category[_ngcontent-%COMP%]{text-align:center}.image_privew[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center}#title[_ngcontent-%COMP%], #diagnosis[_ngcontent-%COMP%]{background-color:transparent;color:#00f7ff;border-style:none;font-size:20px;margin:10px}#category[_ngcontent-%COMP%]{border-style:none;font-size:20px;color:#00f7ff;background:transparent;font-weight:700;cursor:pointer}textarea[_ngcontent-%COMP%]{margin:5px;resize:none;height:20.25em;border:none;width:100%;background:rgba(208,225,255,.3);color:#fff}textarea[_ngcontent-%COMP%]::placeholder{color:#fff}.post_button[_ngcontent-%COMP%]{justify-content:right;margin-left:auto;width:100px;height:50px;text-align:center}#image_plus_button[_ngcontent-%COMP%]{width:50px;height:50px;font-size:35px;background-color:#00f7ff;border:transparent;font-weight:700;color:#fff;margin:5px;cursor:pointer}#post_button[_ngcontent-%COMP%]{width:90px;height:30px;border-radius:20px;border:transparent;background-color:#00f7ff;color:#fff;cursor:pointer}img[_ngcontent-%COMP%]{max-width:200px}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none}hr[_ngcontent-%COMP%]{color:#00f7ff7a;background-color:#00f7ff7a;height:2px;border-style:none}[_ngcontent-%COMP%]::-webkit-input-placeholder{text-align:center}[_ngcontent-%COMP%]:-moz-placeholder{text-align:center}[_ngcontent-%COMP%]::-moz-placeholder{text-align:center}[_ngcontent-%COMP%]:-ms-input-placeholder{text-align:center}.input_file_button[_ngcontent-%COMP%]{width:50px;height:50px;font-size:35px;background-color:#eaf4ff;border:transparent;font-weight:700;color:#00f7ff;padding:5px;cursor:pointer}#category[_ngcontent-%COMP%]:focus{outline:none}#option_cover[_ngcontent-%COMP%]{position:absolute;top:0;right:0;left:0;width:300px;height:42px;margin:100px auto 0;z-index:1}option[_ngcontent-%COMP%]:hover{background-color:#fff;border-style:none}\"]\n  });\n  return WritingComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}